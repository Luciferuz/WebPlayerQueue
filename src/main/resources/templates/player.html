<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <!--    tmp delete-->
<!--    <link href="https://cdn.plyr.io/3.6.3/plyr.css" rel="stylesheet" />-->
    <!--    tmp delete-->
    <title>WebPlayer by Luciferuzzz</title>
</head>
<body>
<div class="container mt-3">
    <div class="d-flex justify-content-center">
        <div class="p-2">
            <a class="btn btn-success" href="/add" th:if="${ #authorization.expression('isAuthenticated()') }">Добавить
                песенку</a>
        </div>
        <div class="p-2">
            <button class="btn btn-primary" onclick="window.location.href = '/home'">Home screen</button>
        </div>
    </div>
</div>
<div class="d-flex flex-column">
    <div class="p-2 border-bottom" align="center">
        <!--            <div id="player"></div>-->
        <iframe id="ytplayer" type="text/html" width="880" height="495"
                th:src="${currentSongUrl}"
                src="https://www.youtube.com/embed/oIdgpZijCpc?autoplay=1"
                frameborder="0" allowfullscreen>
        </iframe>
    </div>
    <br>
    <div class="p-2" align="center">
        <a class="btn btn-success" th:href="${'/skip/'}" th:if="${ #authorization.expression('isAuthenticated()') }">Следующий
            трек</a>
    </div>
    <div class="p-3">
        <table class="table table-striped">
            <thead>
            <tr>
                <th scope="col">#</th>
                <th scope="col">Description</th>
                <th scope="col">Заказчик</th>
                <th scope="col">Link</th>
            </tr>
            </thead>
            <tbody>
            <tr th:each="track: ${musicqueue}">
                <th scope="row" th:text="${track.getId()}"></th>
                <th scope="row" th:text="${track.getDescription()}"></th>
                <th scope="row" th:text="${track.getCustomer().getName()}"></th>
                <th scope="row" th:text="${track.getUrl}"></th>
            </tr>
            </tbody>
        </table>
    </div>
</div>
</div>

<!--<script>-->
<!--    // 2. This code loads the IFrame Player API code asynchronously.-->
<!--    var tag = document.createElement('script');-->

<!--    tag.src = "https://www.youtube.com/iframe_api";-->
<!--    var firstScriptTag = document.getElementsByTagName('script')[0];-->
<!--    firstScriptTag.parentNode.insertBefore(tag, firstScriptTag);-->

<!--    var player;-->
<!--    function onYouTubeIframeAPIReady() {-->
<!--        player = new YT.Player('player', {-->
<!--            height: '360',-->
<!--            width: '640',-->
<!--            videoId: 'M7lc1UVf-VE',-->
<!--            events: {-->
<!--                'onReady': onPlayerReady,-->
<!--                'onStateChange': onPlayerStateChange-->
<!--            }-->
<!--        });-->
<!--    }-->


<!--    function onPlayerReady(event) {-->
<!--        event.target.playVideo();-->
<!--    }-->

<!--    var done = false;-->
<!--    function onPlayerStateChange(event) {-->
<!--        if (event.data == YT.PlayerState.PLAYING && !done) {-->
<!--            setTimeout(stopVideo, 6000);-->
<!--            done = true;-->
<!--        }-->
<!--    }-->
<!--    function stopVideo() {-->
<!--        player.stopVideo();-->
<!--    }-->
<!--</script>-->
</body>
</html>